(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function l(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=l(o);fetch(o.href,n)}})();"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("ServiceWorker registration successful with scope:",t.scope)}).catch(t=>{console.error("ServiceWorker registration failed:",t)});const h=document.getElementById("orderForm"),p=document.getElementById("orderList"),I=document.getElementById("totalChiliColorado"),T=document.getElementById("totalPeppersCheese"),E=document.getElementById("generatePdfButton"),v=document.getElementById("customerName"),f=document.getElementById("customerList"),g=document.getElementById("phoneNumber");let s=JSON.parse(localStorage.getItem("orders"))||[],u=JSON.parse(localStorage.getItem("customers"))||[];function C(){f.innerHTML="",u.forEach(t=>{const e=document.createElement("option");e.value=t.name,f.appendChild(e)})}function $(t){u.find(l=>l.name===t.name)||(u.push(t),localStorage.setItem("customers",JSON.stringify(u)),C())}v.addEventListener("input",function(){const t=u.find(e=>e.name===this.value);t?g.value=t.phone:g.value=""});function N(t){const e=document.createElement("div");return e.classList.add("order-item"),e.dataset.id=t.id,e.innerHTML=`
    <p><strong>Pickup Date:</strong> ${t.pickupDate}</p>
    <p><strong>Pickup Time:</strong> ${y(t.pickupTime)}</p>
    <p><strong>Chili Colorado:</strong> ${t.coloradoAmount} amount (${t.coloradoTemperature})</p>
    <p><strong>Peppers and Cheese:</strong> ${t.cheeseAmount} amount (${t.cheeseTemperature})</p>
    <p><strong>Customer Name:</strong> ${t.customerName}</p>
    <p><strong>Phone Number:</strong> ${t.phoneNumber}</p>
    <label>
      <input type="checkbox" ${t.fulfilled?"checked":""} onchange="toggleFulfilled(${t.id})">
      <span class="fulfilled-label">Picked Up</span>
    </label>
    <button class="delete-btn" data-id="${t.id}">Delete</button>
  `,e}function d(){p.innerHTML="";let t=0,e=0;s.forEach(l=>{const a=N(l);p.appendChild(a),t+=l.coloradoAmount,e+=l.cheeseAmount}),I.textContent=`Total Chili Colorado Ordered: ${t}`,T.textContent=`Total Peppers and Cheese Ordered: ${e}`}function y(t){const[e,l]=t.split(":"),a=e>=12?"PM":"AM";return`${e%12||12}:${l} ${a}`}function P(t){t.preventDefault();const e={id:s.length>0?s[s.length-1].id+1:1,pickupDate:document.getElementById("pickupDate").value,pickupTime:document.getElementById("pickupTime").value,coloradoAmount:parseInt(document.getElementById("coloradoAmount").value,10),coloradoTemperature:document.getElementById("coloradoTemperature").value,cheeseAmount:parseInt(document.getElementById("cheeseAmount").value,10),cheeseTemperature:document.getElementById("cheeseTemperature").value,customerName:document.getElementById("customerName").value,phoneNumber:document.getElementById("phoneNumber").value,fulfilled:!1};s.push(e),localStorage.setItem("orders",JSON.stringify(s)),d(),h.reset(),$({name:e.customerName,phone:e.phoneNumber})}function b(t){s=s.filter(e=>e.id!==t),localStorage.setItem("orders",JSON.stringify(s)),d()}function O(t){const e=s.find(l=>l.id===t);e&&(e.fulfilled=!e.fulfilled,localStorage.setItem("orders",JSON.stringify(s)),d())}function L(){const{jsPDF:t}=window.jspdf,e=new t,l="Tamale Order List";e.setFontSize(18),e.setTextColor(0,0,0),e.text(l,105,20,null,null,"center");const a=s.map(r=>[r.customerName,r.pickupDate,y(r.pickupTime),`Chili Colorado: ${r.coloradoAmount} (${r.coloradoTemperature})`,`Peppers and Cheese: ${r.cheeseAmount} (${r.cheeseTemperature})`]);a.sort((r,i)=>new Date(`${r[1]}T${r[2]}`)-new Date(`${i[1]}T${i[2]}`));const o=s.reduce((r,i)=>r+i.coloradoAmount,0),n=s.reduce((r,i)=>r+i.cheeseAmount,0),c=o+n;e.autoTable({head:[["Customer Name","Pickup Date","Pickup Time","Chili Colorado","Peppers and Cheese"]],body:a,startY:30,theme:"grid",headStyles:{fillColor:[255,255,255],textColor:0},styles:{fontSize:10}});const m=e.autoTable.previous.finalY+10;e.setFontSize(12),e.text(`Total Chili Colorado Ordered: ${o}`,14,m),e.text(`Total Peppers and Cheese Ordered: ${n}`,14,m+10),e.text(`Total Tamales Ordered: ${c}`,14,m+20),e.save("tamale_order_list.pdf")}h.addEventListener("submit",P);E.addEventListener("click",L);p.addEventListener("click",t=>{if(t.target.classList.contains("delete-btn")){const e=parseInt(t.target.dataset.id,10);b(e)}if(t.target.type==="checkbox"){const e=parseInt(t.target.parentElement.parentElement.dataset.id,10);O(e)}});C();d();
